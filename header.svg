<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="220" viewBox="0 0 800 220" xmlns="http://www.w3.org/2000/svg">
  <style>
    :root{
      /* Global look/feel */
      --fontSize: 28px;
      --lineHeight: 42px;
      --fg: #C8F7C5;
      --dim: #7FD37A;
      --bg: #0B0F10;
      --cursor: #A0FFA0;
      --padX: 40px;
      --padY: 28px;
      --font: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;

      /* Typing tempo: duration per character (adjust once) */
      --perChar: .09s;
    }

    .wrap { transform: translate(var(--padX), var(--padY)); }
    text      { font: var(--fontSize) var(--font); dominant-baseline: hanging; }
    .prompt   { fill: var(--dim); }
    .cmd      { fill: var(--fg); }
    .glow     { filter: url(#glow); }

    /* Each line computes its own total typing time from --n and --perChar */
    .line { --t: calc(var(--n) * var(--perChar)); --stop: calc(var(--start) + var(--t)); }

    /* The reveal rect grows in ch-steps (monospace) */
    .reveal { height: var(--lineHeight); width: 0ch; }
    .typing {
      animation: typing var(--t) steps(var(--n)) var(--start) forwards;
    }
    @keyframes typing { from { width: 0ch; } to { width: calc(var(--n) * 1ch); } }

    /* Cursor follows the typing and then disappears */
    .cursor {
      width: 1ch;
      height: calc(var(--fontSize) + 6px);
      y: 2px;
      fill: var(--cursor);
      opacity: 1;
      animation:
        move var(--t) steps(var(--n)) var(--start) forwards,
        hide 1ms linear var(--stop) forwards;
    }
    @keyframes move { from { transform: translateX(0); } to { transform: translateX(calc(var(--n) * 1ch)); } }
    @keyframes hide { to { opacity: 0; } }
  </style>

  <!-- Background terminal window -->
  <rect x="0" y="0" width="100%" height="100%" rx="18" ry="18" fill="var(--bg)"/>
  <!-- Title bar dots -->
  <g transform="translate(16,16)">
    <circle r="6" cx="0"  cy="0" fill="#ff5f56"/>
    <circle r="6" cx="20" cy="0" fill="#ffbd2e"/>
    <circle r="6" cx="40" cy="0" fill="#27c93f"/>
  </g>

  <!-- Glow filter -->
  <defs>
    <filter id="glow">
      <feGaussianBlur stdDeviation="1.2" result="b"/>
      <feMerge>
        <feMergeNode in="b"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Reusable clipPath symbol (instanced per line) -->
    <symbol id="clipRect">
      <rect class="reveal typing" x="0" y="0" rx="0" ry="0"/>
    </symbol>
  </defs>

  <g class="wrap">
    <!-- Static prompt (Line 0) -->
    <text class="prompt glow" y="0">
      <tspan x="0">keith@uiuc</tspan>
      <tspan dx="10">:</tspan>
      <tspan dx="10">~/projects/nerf-turret</tspan>
      <tspan dx="10" fill="#7aa2f7">$</tspan>
    </text>

    <!-- LINE 1 -->
    <g class="line" style="--n: 29; --start: 0s;" transform="translate(0, var(--lineHeight))">
      <!-- unique clipPath per line to avoid affecting others -->
      <clipPath id="clip1"><use href="#clipRect" class="typing"/></clipPath>
      <text class="cmd glow" clip-path="url(#clip1)">git status && git add .</text>
      <rect class="cursor"/>
    </g>

    <!-- LINE 2 (starts after line 1 finishes + 0.6s pause) -->
    <!-- start = prev --start + prev --n * --perChar + 0.6s -->
    <g class="line" style="--n: 32; --start: calc(0s + 29 * var(--perChar) + .6s);" transform="translate(0, calc(var(--lineHeight) * 2))">
      <clipPath id="clip2"><use href="#clipRect" class="typing"/></clipPath>
      <text class="cmd glow" clip-path="url(#clip2)">git commit -m "PID update"</text>
      <rect class="cursor"/>
    </g>

    <!-- LINE 3 -->
    <g class="line" style="--n: 24; --start: calc(0s + 29 * var(--perChar) + .6s + 32 * var(--perChar) + .6s);" transform="translate(0, calc(var(--lineHeight) * 3))">
      <clipPath id="clip3"><use href="#clipRect" class="typing"/></clipPath>
      <text class="cmd glow" clip-path="url(#clip3)">git push origin main</text>
      <rect class="cursor"/>
    </g>

    <!-- Add more lines by duplicating a .line group, updating --n, --start, and the text -->
  </g>
</svg>
